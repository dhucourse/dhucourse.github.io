import{_ as b,u as x,r as l,a as k,b as q,d as s,q as c,g as n,n as a,h as m,e as y,w as V,f as U,i as _,E as i}from"./index-CnmwwGkb.js";import{r as E}from"./account-DJpGPDhY.js";const R={class:"container"},S={class:"register-box"},T={class:"form-group"},C={class:"form-group"},N={class:"form-group"},z={class:"form-group"},B={class:"footer"},D="东华大道",M={__name:"index",setup(P){const v=_(),f=x(),t=l(""),r=l(""),u=l(""),d=l(""),w=async()=>{if(r.value!==u.value){i.error("两次输入的密码不一致！");return}if(d.value.trim()!==D){i.error("校验问题回答错误，无法注册。");return}if(t.value&&r.value)try{const p={username:t.value,password:r.value},e=await E(p);i.success("注册成功！"),e.data&&f.setToken(e.data),v.push("/")}catch{i.error("注册失败，请重试")}};return(p,e)=>{const g=U("router-link");return q(),k("div",null,[s("div",R,[s("div",S,[e[11]||(e[11]=s("div",{class:"logo"},"课程测评@DHU",-1)),e[12]||(e[12]=s("h2",null,"创建新账户",-1)),s("form",{onSubmit:c(w,["prevent"])},[s("div",T,[e[4]||(e[4]=s("label",{for:"username"},"用户名",-1)),n(s("input",{id:"username","onUpdate:modelValue":e[0]||(e[0]=o=>t.value=o),type:"text",placeholder:"请输入用户名",required:""},null,512),[[a,t.value]])]),s("div",C,[e[5]||(e[5]=s("label",{for:"password"},"密码",-1)),n(s("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=o=>r.value=o),type:"password",placeholder:"请输入密码（至少8位）",minlength:"8",required:""},null,512),[[a,r.value]])]),s("div",N,[e[6]||(e[6]=s("label",{for:"confirmPassword"},"确认密码",-1)),n(s("input",{id:"confirmPassword","onUpdate:modelValue":e[2]||(e[2]=o=>u.value=o),type:"password",placeholder:"请再次输入密码",required:""},null,512),[[a,u.value]])]),s("div",z,[e[7]||(e[7]=s("label",{for:"quiz"},"校验问题：DHU松江第二食堂与镜月湖之间的道路叫什么",-1)),n(s("input",{id:"quiz","onUpdate:modelValue":e[3]||(e[3]=o=>d.value=o),type:"text",placeholder:"请输入回答",required:""},null,512),[[a,d.value]])]),e[8]||(e[8]=s("button",{type:"submit",class:"register-submit"},"注册",-1))],32),s("div",B,[e[10]||(e[10]=m(" 已有账户？ ",-1)),y(g,{to:"/login",class:"link"},{default:V(()=>[...e[9]||(e[9]=[m("立即登录",-1)])]),_:1})])])])])}}},I=b(M,[["__scopeId","data-v-7c2fb3fa"]]);export{I as default};
