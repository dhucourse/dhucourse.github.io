import{_ as U,r as u,u as I,c as N,o as S,a as _,b as g,d as e,e as d,w as v,f as L,F as R,g as B,v as D,t as r,h as a,i as V}from"./index-CnmwwGkb.js";import{g as E}from"./account-DJpGPDhY.js";import{g as F,a as Q}from"./comment-C4UYBfxe.js";const A={class:"nav-left"},H={class:"nav-right"},j=["src","alt"],q={class:"dropdown-menu"},z={class:"user-info"},G=["src","alt"],J={class:"user-details"},K={class:"username"},O={class:"container"},P={class:"subtext"},W={class:"subtext highlight"},X={class:"review"},Y={style:{"text-align":"right"}},Z={__name:"index",setup($){const p=u(0),k=u("欢迎回来! 课程列表已更新至25年秋季. 暑期愉快!"),o=u(null),l=u(!1);let n=null;function b(){n&&(clearTimeout(n),n=null),l.value=!0}function h(){n&&clearTimeout(n),n=setTimeout(()=>{l.value=!1,n=null},220)}function C(){l.value=!l.value}const m=V(),f=I(),c=u(""),w=u([{content:"pptreader搭配上个世纪风格的ppt，说话如同金经。不仅如此还总愿意说一些pua类型的话语，颇有一种年龄大人的优越感，字里行间透露着吃到时代红利的美。此外还产生了多个名言，例如期中让 ...",recommend:"课程内容 工作量 考核",course:"普通物理 (I) (彭士香老师)",link:"#"}]);N(()=>searchQuery.value?w.value.filter(s=>s.course.toLowerCase().includes(searchQuery.value.toLowerCase())):w.value);async function x(){try{if(f.token&&f.token!==""){const s=await E();s.data&&(o.value=s.data)}}catch(s){console.log("获取用户信息失败",s),o.value=null}}function y(){m.push("/detail")}function M(){m.push("/post")}function T(){f.removeToken(),o.value=null,l.value=!1,m.push("/")}return S(async()=>{await x();let s=await F();console.log(s.data),c.value=s.data;let t=await Q();p.value=t.data}),(s,t)=>{const i=L("router-link");return g(),_("div",null,[e("nav",null,[e("div",A,[d(i,{to:"/detail"},{default:v(()=>[...t[0]||(t[0]=[a("课程列表",-1)])]),_:1}),d(i,{to:"/post"},{default:v(()=>[...t[1]||(t[1]=[a("发布测评",-1)])]),_:1}),d(i,{to:"/about"},{default:v(()=>[...t[2]||(t[2]=[a("关于",-1)])]),_:1})]),e("div",H,[o.value?(g(),_("div",{key:1,class:"user-menu",onMouseenter:b,onMouseleave:h},[e("img",{onClick:C,src:o.value.avatar,alt:o.value.username,class:"user-avatar"},null,8,j),B(e("div",q,[e("div",z,[e("img",{src:o.value.avatar,alt:o.value.username,class:"user-info-avatar"},null,8,G),e("div",J,[e("div",K,r(o.value.username),1)])]),t[5]||(t[5]=e("div",{class:"menu-divider"},null,-1)),e("button",{onClick:T,class:"logout-btn"},"退出登录")],512),[[D,l.value]])],32)):(g(),_(R,{key:0},[d(i,{to:"/login",class:"login-btn"},{default:v(()=>[...t[3]||(t[3]=[a("登录",-1)])]),_:1}),d(i,{to:"/register",class:"register-btn"},{default:v(()=>[...t[4]||(t[4]=[a("注册",-1)])]),_:1})],64))])]),e("div",O,[t[8]||(t[8]=e("div",{class:"logo"},"课程测评@DHU",-1)),e("div",P,[t[6]||(t[6]=a(" 来自同学们的 ",-1)),e("strong",null,r(p.value),1),t[7]||(t[7]=a(" 条课程测评，帮你找到讲得好、作业少、考试水、给分高的课。 ",-1))]),e("div",W,r(k.value),1),e("div",{class:"buttons"},[e("button",{onClick:y},"浏览课程"),e("button",{onClick:M},"发布测评")])]),e("div",X,[e("div",null,r(c.value.content),1),e("div",Y,[t[9]||(t[9]=a(" —— ",-1)),e("a",null,r(c.value.title)+"("+r(c.value.teacher)+")",1)])])])}}},oe=U(Z,[["__scopeId","data-v-35590b7d"]]);export{oe as default};
